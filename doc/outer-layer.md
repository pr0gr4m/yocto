# outer layer

poky는 머신 설정 파일, 클래스, 애플리케이션, 화면을 구성하는 스택들과 프레임워크까지 방대한 양의 메타데이터를 갖고 있다. 비트베이크는 다양한 곳에서 메타데이터를 로드할 수 있고, 이 메타데이터 집합을 메타레이어라고 한다.
레이어를 사용하면 사용자가 프로젝트에 필요한 메타데이터 집합만 선택할 수 있는 노리적 단위로 메타데이터를 분리할 수 있다. 다음은 레이어를 사용해서 할 수 있는 커스터마이즈의 예다.
커스텀 프로젝트 환경을 만들 때 레시피와 설정 파일을 변경하고 poky 레이어에 파일을 수정하는 대신 다른 레이어에서 메타데이터를 만들어야 한다. 다음 명령어로 레이어를 확인할 수 있다.
```console
$ bitbake-layers show-layers
```
레이어 주 특징은 다음과 같다.
* 이름 : 보통 meta 접두사로 시작한다.
* 경로 : 새로운 레이어를 프로젝트에 추가하고 싶을 때 BBPATH에 레이어의 위치를 이어 붙여야 한다.
* 우선순위 : 비트베이크에서 사용하는 값으로, 어떤 레시피를 이용하고 어떤 .bbappend를 먼저 적용시킬지 결정하는 데 사용한다.

대표 레이어들은 다음과 같다.
* meta : 오픈 임베디드 코어 메타데이터를 갖고 있다.
* meta-java : 자바 런타임과 SDK를 지원한다.
* meta-qt5 : qt5를 지원한다.
* meta-browser : 파이어폭스와 크롬같은 웹 브라우저를 갖고 있다.
* meta-yocto-bsp : poky 레퍼런스 BSP 레이어로, 패키지들을 해당 머신에 적용하기 위한 머신 환경설정 파일들과 레시피를 갖고 있다.
* meta-poky : poky의 레퍼런스 배포 레이어로, poky가 기본으로 사용하는 배포 환경설정 파일을 갖고 있다.

### 메타레이어 추가

다양한 벤더들에서 제공되는 수백 개의 메타레이어가 있고, 개발할 때 필요한 부분은 프로젝트 소스 디렉토리에서 수동으로 받아와야 한다.
http://git.yoctoproject.org/ 나 http://layers.openembedded.org 에서 찾을 수 있다.
build.conf/bblayers.conf 를 수정하는 대신 bitbake-layers 도구를 사용할 수 있다. 빌드 디렉토리에서 다음 명령을 사용하면 된다.
```console
$ bitbake-layers add-layer ../meta-openembedded/meta-oe
```
이 명령에서 추가된 레이어는 파싱되고 meta-openembedded/meta-oe는 비트베이크 데이터베이스에 포함돼 있어 추가된 레이어에 있는 패키지를 사용할 수 있다.